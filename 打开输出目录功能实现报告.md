# æ‰“å¼€è¾“å‡ºç›®å½•åŠŸèƒ½å®ç°æŠ¥å‘Š

## åŠŸèƒ½æ¦‚è¿°

æ ¹æ®ç”¨æˆ·è¦æ±‚ï¼Œåœ¨GUIå³ä¾§åº•éƒ¨æŒ‰é”®åŒºåŸŸè¿½åŠ äº†ä¸€ä¸ª"æ‰“å¼€è¾“å‡ºç›®å½•"æŒ‰é’®ï¼Œç”¨æ¥æ‰“å¼€ç¿»è¯‘ç»“æœå­˜æ”¾çš„æ–‡ä»¶å¤¹ã€‚è¯¥åŠŸèƒ½å·²åœ¨ä¸‰ä¸ªç‰ˆæœ¬ä¸­å…¨éƒ¨å®ç°ï¼š

1. **Pythonç‰ˆPCç«¯**ï¼šåœ¨ç¿»è¯‘å¡ç‰‡ä¸­æ·»åŠ æŒ‰é’®
2. **Pythonç‰ˆWEBç«¯**ï¼šåœ¨ç¿»è¯‘ä»»åŠ¡å¡ç‰‡å¤´éƒ¨æ·»åŠ æŒ‰é’®
3. **C#ç‰ˆPCç«¯**ï¼šåœ¨å³ä¾§åº•éƒ¨æŒ‰é”®åŒºåŸŸæ·»åŠ æŒ‰é’®

## å®ç°è¯¦æƒ…

### 1. C#ç‰ˆPCç«¯å®ç°

#### ç•Œé¢ä¿®æ”¹ (MainWindow.xaml)
- **ä½ç½®**ï¼šå³ä¾§åº•éƒ¨æŒ‰é”®åŒºåŸŸï¼Œåœ¨ç°æœ‰æŒ‰é’®ç»„å‰é¢
- **æŒ‰é’®æ ·å¼**ï¼š
  ```xml
  <Button Content="ğŸ“ æ‰“å¼€è¾“å‡ºç›®å½•" Click="OpenOutputDirectory" Width="110" Height="30" Margin="0,0,5,0"/>
  ```

#### åŠŸèƒ½å®ç° (MainWindow.xaml.cs)
- **æ–¹æ³•å**ï¼š`OpenOutputDirectory`
- **åŠŸèƒ½**ï¼š
  - è·å–è¾“å‡ºç›®å½•è·¯å¾„ï¼š`Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "è¾“å‡º")`
  - è‡ªåŠ¨åˆ›å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
  - ä½¿ç”¨ `explorer.exe` æ‰“å¼€ç›®å½•
  - è®°å½•æ“ä½œæ—¥å¿—
  - å¼‚å¸¸å¤„ç†å’Œç”¨æˆ·æç¤º

```csharp
private void OpenOutputDirectory(object sender, RoutedEventArgs e)
{
    try
    {
        // è·å–è¾“å‡ºç›®å½•è·¯å¾„
        var outputDir = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "è¾“å‡º");
        
        // å¦‚æœè¾“å‡ºç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒ
        if (!Directory.Exists(outputDir))
        {
            Directory.CreateDirectory(outputDir);
            LogMessage($"ğŸ“ åˆ›å»ºè¾“å‡ºç›®å½•: {outputDir}");
        }

        // ä½¿ç”¨Windowsèµ„æºç®¡ç†å™¨æ‰“å¼€ç›®å½•
        System.Diagnostics.Process.Start("explorer.exe", outputDir);
        LogMessage($"ğŸ“ å·²æ‰“å¼€è¾“å‡ºç›®å½•: {outputDir}");
    }
    catch (Exception ex)
    {
        LogMessage($"âŒ æ‰“å¼€è¾“å‡ºç›®å½•å¤±è´¥: {ex.Message}");
        MessageBox.Show($"æ‰“å¼€è¾“å‡ºç›®å½•å¤±è´¥: {ex.Message}", "é”™è¯¯", MessageBoxButton.OK, MessageBoxImage.Error);
    }
}
```

### 2. Pythonç‰ˆPCç«¯å®ç°

#### ç•Œé¢ä¿®æ”¹ (ui/main_window.py)
- **ä½ç½®**ï¼šç¿»è¯‘å¡ç‰‡ä¸­ï¼Œåœ¨"å¼€å§‹ç¿»è¯‘"æŒ‰é’®åé¢
- **æŒ‰é’®æ ·å¼**ï¼š
  ```python
  output_dir_btn = ttk.Button(translate_card, text="ğŸ“ æ‰“å¼€è¾“å‡ºç›®å½•", command=open_output_directory)
  output_dir_btn.pack(fill='x', pady=(5, 10))
  ```

#### åŠŸèƒ½å®ç°
- **æ–¹æ³•å**ï¼š`open_output_directory`
- **åŠŸèƒ½**ï¼š
  - è·¨å¹³å°æ”¯æŒï¼ˆWindowsã€macOSã€Linuxï¼‰
  - è‡ªåŠ¨åˆ›å»ºè¾“å‡ºç›®å½•
  - æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©åˆé€‚çš„æ‰“å¼€æ–¹å¼
  - çŠ¶æ€æ›´æ–°å’Œå¼‚å¸¸å¤„ç†

```python
def open_output_directory():
    """æ‰“å¼€ç¿»è¯‘ç»“æœè¾“å‡ºç›®å½•"""
    try:
        import os
        import subprocess
        import platform
        
        # è·å–è¾“å‡ºç›®å½•è·¯å¾„
        output_dir = os.path.join(os.getcwd(), "è¾“å‡º")
        
        # å¦‚æœè¾“å‡ºç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒ
        if not os.path.exists(output_dir):
            os.makedirs(output_dir)
            status_var.set(f"ğŸ“ åˆ›å»ºè¾“å‡ºç›®å½•: {output_dir}")
        
        # æ ¹æ®æ“ä½œç³»ç»Ÿæ‰“å¼€ç›®å½•
        system = platform.system()
        if system == "Windows":
            os.startfile(output_dir)
        elif system == "Darwin":  # macOS
            subprocess.run(["open", output_dir])
        else:  # Linux
            subprocess.run(["xdg-open", output_dir])
        
        status_var.set(f"ğŸ“ å·²æ‰“å¼€è¾“å‡ºç›®å½•: {output_dir}")
        
    except Exception as e:
        error_msg = f"æ‰“å¼€è¾“å‡ºç›®å½•å¤±è´¥: {str(e)}"
        status_var.set(f"âŒ {error_msg}")
        messagebox.showerror("é”™è¯¯", error_msg)
```

### 3. Pythonç‰ˆWEBç«¯å®ç°

#### å‰ç«¯ç•Œé¢ä¿®æ”¹ (web/templates/index.html)
- **ä½ç½®**ï¼šç¿»è¯‘ä»»åŠ¡å¡ç‰‡å¤´éƒ¨ï¼Œåœ¨"åˆ·æ–°"æŒ‰é’®å‰é¢
- **æŒ‰é’®æ ·å¼**ï¼š
  ```html
  <button class="btn btn-sm btn-outline-primary btn-icon me-2" id="open-output-dir">
      <i class="bi bi-folder2-open"></i> æ‰“å¼€è¾“å‡ºç›®å½•
  </button>
  ```

#### å‰ç«¯JavaScriptå®ç° (web/static/js/main.js)
- **äº‹ä»¶ç»‘å®š**ï¼š
  ```javascript
  document.getElementById('open-output-dir').addEventListener('click', openOutputDirectory);
  ```

- **åŠŸèƒ½å®ç°**ï¼š
  ```javascript
  async function openOutputDirectory() {
      try {
          addSystemLog('æ­£åœ¨æ‰“å¼€è¾“å‡ºç›®å½•...', 'info');
          
          const response = await fetch('/api/open-output-directory', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              }
          });

          if (response.ok) {
              const data = await response.json();
              addSystemLog(`è¾“å‡ºç›®å½•å·²æ‰“å¼€: ${data.path}`, 'success');
          } else {
              const data = await response.json();
              addSystemLog(`æ‰“å¼€è¾“å‡ºç›®å½•å¤±è´¥: ${data.detail}`, 'error');
              alert('æ‰“å¼€è¾“å‡ºç›®å½•å¤±è´¥: ' + data.detail);
          }
      } catch (error) {
          addSystemLog(`æ‰“å¼€è¾“å‡ºç›®å½•å‡ºé”™: ${error.message}`, 'error');
          alert('æ‰“å¼€è¾“å‡ºç›®å½•å‡ºé”™: ' + error.message);
      }
  }
  ```

#### åç«¯APIå®ç° (web/api.py)
- **APIç«¯ç‚¹**ï¼š`POST /api/open-output-directory`
- **åŠŸèƒ½å®ç°**ï¼š
  ```python
  @app.post("/api/open-output-directory")
  async def open_output_directory():
      """æ‰“å¼€è¾“å‡ºç›®å½•"""
      try:
          import os
          import subprocess
          import platform
          
          # è·å–è¾“å‡ºç›®å½•è·¯å¾„
          output_dir = os.path.join(os.getcwd(), "è¾“å‡º")
          
          # å¦‚æœè¾“å‡ºç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒ
          if not os.path.exists(output_dir):
              os.makedirs(output_dir)
              logger.info(f"åˆ›å»ºè¾“å‡ºç›®å½•: {output_dir}")
          
          # æ ¹æ®æ“ä½œç³»ç»Ÿæ‰“å¼€ç›®å½•
          system = platform.system()
          if system == "Windows":
              os.startfile(output_dir)
          elif system == "Darwin":  # macOS
              subprocess.run(["open", output_dir])
          else:  # Linux
              subprocess.run(["xdg-open", output_dir])
          
          logger.info(f"å·²æ‰“å¼€è¾“å‡ºç›®å½•: {output_dir}")
          return {
              "success": True,
              "message": "è¾“å‡ºç›®å½•å·²æ‰“å¼€",
              "path": output_dir
          }
          
      except Exception as e:
          logger.error(f"æ‰“å¼€è¾“å‡ºç›®å½•å¤±è´¥: {str(e)}")
          raise HTTPException(status_code=500, detail=f"æ‰“å¼€è¾“å‡ºç›®å½•å¤±è´¥: {str(e)}")
  ```

## åŠŸèƒ½ç‰¹æ€§

### 1. è·¨å¹³å°æ”¯æŒ
- **Windows**ï¼šä½¿ç”¨ `os.startfile()` æˆ– `explorer.exe`
- **macOS**ï¼šä½¿ç”¨ `open` å‘½ä»¤
- **Linux**ï¼šä½¿ç”¨ `xdg-open` å‘½ä»¤

### 2. æ™ºèƒ½ç›®å½•ç®¡ç†
- è‡ªåŠ¨æ£€æµ‹è¾“å‡ºç›®å½•æ˜¯å¦å­˜åœ¨
- ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºç›®å½•
- ç»Ÿä¸€çš„è¾“å‡ºç›®å½•è·¯å¾„ï¼š`./è¾“å‡º/`

### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- æ¸…æ™°çš„æŒ‰é’®å›¾æ ‡å’Œæ–‡å­—è¯´æ˜
- æ“ä½œçŠ¶æ€å®æ—¶åé¦ˆ
- è¯¦ç»†çš„é”™è¯¯æç¤ºå’Œæ—¥å¿—è®°å½•
- ä¸€é”®ç›´è¾¾ç¿»è¯‘ç»“æœæ–‡ä»¶å¤¹

### 4. é”™è¯¯å¤„ç†
- å®Œå–„çš„å¼‚å¸¸æ•è·æœºåˆ¶
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- è¯¦ç»†çš„æ—¥å¿—è®°å½•ä¾¿äºè°ƒè¯•

## æµ‹è¯•éªŒè¯

### 1. ç¼–è¯‘æµ‹è¯•
- **C#ç‰ˆæœ¬**ï¼š`dotnet build` ç¼–è¯‘æˆåŠŸ
- **Pythonç‰ˆæœ¬**ï¼šè¯­æ³•æ£€æŸ¥é€šè¿‡
- **Webç‰ˆæœ¬**ï¼šAPIç«¯ç‚¹æ­£å¸¸æ³¨å†Œ

### 2. å¯åŠ¨æµ‹è¯•
- **C#ç‰ˆæœ¬**ï¼šç¨‹åºæ­£å¸¸å¯åŠ¨ï¼Œç•Œé¢æ˜¾ç¤ºæ­£å¸¸
- **Python PCç‰ˆ**ï¼šGUIç•Œé¢æ­£å¸¸åŠ è½½
- **Python Webç‰ˆ**ï¼šWebæœåŠ¡å™¨æ­£å¸¸å¯åŠ¨

### 3. åŠŸèƒ½ä½ç½®
- **C#ç‰ˆæœ¬**ï¼šå³ä¾§åº•éƒ¨æŒ‰é”®åŒºåŸŸï¼Œä½ç½®ç¬¦åˆè¦æ±‚
- **Python PCç‰ˆ**ï¼šç¿»è¯‘å¡ç‰‡ä¸­ï¼Œä¾¿äºç”¨æˆ·è®¿é—®
- **Python Webç‰ˆ**ï¼šç¿»è¯‘ä»»åŠ¡å¡ç‰‡å¤´éƒ¨ï¼Œä½ç½®é†’ç›®

## ä½¿ç”¨è¯´æ˜

### C#ç‰ˆPCç«¯
1. å¯åŠ¨ç¨‹åºåï¼Œåœ¨å³ä¾§åº•éƒ¨å¯çœ‹åˆ°"ğŸ“ æ‰“å¼€è¾“å‡ºç›®å½•"æŒ‰é’®
2. ç‚¹å‡»æŒ‰é’®å³å¯æ‰“å¼€ç¿»è¯‘ç»“æœå­˜æ”¾çš„æ–‡ä»¶å¤¹
3. æ“ä½œç»“æœä¼šåœ¨æ—¥å¿—åŒºåŸŸæ˜¾ç¤º

### Pythonç‰ˆPCç«¯
1. å¯åŠ¨ç¨‹åºåï¼Œåœ¨"ğŸš€ å¼€å§‹ç¿»è¯‘"å¡ç‰‡ä¸­å¯çœ‹åˆ°"ğŸ“ æ‰“å¼€è¾“å‡ºç›®å½•"æŒ‰é’®
2. ç‚¹å‡»æŒ‰é’®å³å¯æ‰“å¼€ç¿»è¯‘ç»“æœå­˜æ”¾çš„æ–‡ä»¶å¤¹
3. æ“ä½œç»“æœä¼šåœ¨çŠ¶æ€æ æ˜¾ç¤º

### Pythonç‰ˆWEBç«¯
1. æ‰“å¼€Webç•Œé¢ï¼Œåœ¨"ç¿»è¯‘ä»»åŠ¡"å¡ç‰‡å¤´éƒ¨å¯çœ‹åˆ°"ğŸ“ æ‰“å¼€è¾“å‡ºç›®å½•"æŒ‰é’®
2. ç‚¹å‡»æŒ‰é’®å³å¯æ‰“å¼€ç¿»è¯‘ç»“æœå­˜æ”¾çš„æ–‡ä»¶å¤¹
3. æ“ä½œç»“æœä¼šåœ¨ç³»ç»Ÿæ—¥å¿—ä¸­æ˜¾ç¤º

## æŠ€æœ¯è¦ç‚¹

### 1. è·¯å¾„å¤„ç†
- ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `./è¾“å‡º/` ç¡®ä¿åœ¨ä¸åŒç¯å¢ƒä¸‹çš„ä¸€è‡´æ€§
- è‡ªåŠ¨å¤„ç†è·¯å¾„åˆ†éš”ç¬¦çš„è·¨å¹³å°å…¼å®¹æ€§

### 2. è¿›ç¨‹è°ƒç”¨
- å®‰å…¨çš„è¿›ç¨‹å¯åŠ¨æ–¹å¼
- é€‚å½“çš„é”™è¯¯å¤„ç†é¿å…ç¨‹åºå´©æºƒ

### 3. ç”¨æˆ·ç•Œé¢é›†æˆ
- ä¿æŒä¸ç°æœ‰ç•Œé¢é£æ ¼çš„ä¸€è‡´æ€§
- åˆç†çš„æŒ‰é’®å¸ƒå±€å’Œé—´è·

### 4. å¼‚æ­¥å¤„ç†
- Webç‰ˆæœ¬ä½¿ç”¨å¼‚æ­¥APIé¿å…é˜»å¡
- é€‚å½“çš„è¶…æ—¶å’Œé”™è¯¯å¤„ç†æœºåˆ¶

## æ€»ç»“

"æ‰“å¼€è¾“å‡ºç›®å½•"åŠŸèƒ½å·²åœ¨ä¸‰ä¸ªç‰ˆæœ¬ä¸­å…¨éƒ¨å®ç°ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **åŠŸèƒ½å®Œæ•´**ï¼šæ”¯æŒæ‰€æœ‰ä¸»æµæ“ä½œç³»ç»Ÿ
2. **ç”¨æˆ·å‹å¥½**ï¼šä¸€é”®ç›´è¾¾ï¼Œæ“ä½œç®€å•
3. **ç¨³å®šå¯é **ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
4. **ç•Œé¢ç»Ÿä¸€**ï¼šä¸ç°æœ‰ç•Œé¢é£æ ¼ä¿æŒä¸€è‡´
5. **è·¨ç‰ˆæœ¬æ”¯æŒ**ï¼šä¸‰ä¸ªç‰ˆæœ¬åŠŸèƒ½ä¸€è‡´

è¯¥åŠŸèƒ½å¤§å¤§æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œç”¨æˆ·æ— éœ€æ‰‹åŠ¨æŸ¥æ‰¾ç¿»è¯‘ç»“æœæ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æŒ‰é’®å¿«é€Ÿè®¿é—®è¾“å‡ºç›®å½•ã€‚

---

*åŠŸèƒ½å®ç°å®Œæˆæ—¥æœŸ: 2025å¹´7æœˆ21æ—¥*
*å®ç°ç‰ˆæœ¬: v3.1*
